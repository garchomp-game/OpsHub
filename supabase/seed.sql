-- =============================================================
-- OpsHub シードデータ（ローカル開発用）
-- supabase db reset で自動適用されます
-- =============================================================
-- パスワード: すべて "password123"
-- bcrypt hash: $2a$10$qNNmydZGJxcg06XmVIRvaOuXSmv1GKm8u0IHyYuilSBZnNYwaNHca

-- =============================================================
-- 1. テナント
-- =============================================================
INSERT INTO public.tenants (id, name, slug) VALUES
  ('44444444-0000-0000-0000-000000000001', '株式会社テスト', 'test-corp');

-- =============================================================
-- 2. auth.users （6ユーザー × 各ロール）
-- =============================================================
INSERT INTO auth.users (
  id, instance_id, aud, role, email, encrypted_password,
  email_confirmed_at, raw_app_meta_data, raw_user_meta_data,
  created_at, updated_at, confirmation_token, recovery_token,
  email_change, email_change_token_new, email_change_token_current,
  is_sso_user, is_anonymous
) VALUES
  -- Tenant Admin
  (
    '11111111-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000000000',
    'authenticated', 'authenticated',
    'admin@test-corp.example.com',
    '$2a$10$qNNmydZGJxcg06XmVIRvaOuXSmv1GKm8u0IHyYuilSBZnNYwaNHca',
    now(),
    '{"provider":"email","providers":["email"]}',
    '{"name":"管理 太郎"}',
    now(), now(), '', '', '', '', '', false, false
  ),
  -- PM
  (
    '11111111-0000-0000-0000-000000000002',
    '00000000-0000-0000-0000-000000000000',
    'authenticated', 'authenticated',
    'pm@test-corp.example.com',
    '$2a$10$qNNmydZGJxcg06XmVIRvaOuXSmv1GKm8u0IHyYuilSBZnNYwaNHca',
    now(),
    '{"provider":"email","providers":["email"]}',
    '{"name":"佐藤 花子"}',
    now(), now(), '', '', '', '', '', false, false
  ),
  -- Accounting
  (
    '11111111-0000-0000-0000-000000000003',
    '00000000-0000-0000-0000-000000000000',
    'authenticated', 'authenticated',
    'accounting@test-corp.example.com',
    '$2a$10$qNNmydZGJxcg06XmVIRvaOuXSmv1GKm8u0IHyYuilSBZnNYwaNHca',
    now(),
    '{"provider":"email","providers":["email"]}',
    '{"name":"鈴木 一郎"}',
    now(), now(), '', '', '', '', '', false, false
  ),
  -- Approver
  (
    '11111111-0000-0000-0000-000000000004',
    '00000000-0000-0000-0000-000000000000',
    'authenticated', 'authenticated',
    'approver@test-corp.example.com',
    '$2a$10$qNNmydZGJxcg06XmVIRvaOuXSmv1GKm8u0IHyYuilSBZnNYwaNHca',
    now(),
    '{"provider":"email","providers":["email"]}',
    '{"name":"田中 次郎"}',
    now(), now(), '', '', '', '', '', false, false
  ),
  -- Member
  (
    '11111111-0000-0000-0000-000000000005',
    '00000000-0000-0000-0000-000000000000',
    'authenticated', 'authenticated',
    'member@test-corp.example.com',
    '$2a$10$qNNmydZGJxcg06XmVIRvaOuXSmv1GKm8u0IHyYuilSBZnNYwaNHca',
    now(),
    '{"provider":"email","providers":["email"]}',
    '{"name":"高橋 三郎"}',
    now(), now(), '', '', '', '', '', false, false
  ),
  -- IT Admin
  (
    '11111111-0000-0000-0000-000000000006',
    '00000000-0000-0000-0000-000000000000',
    'authenticated', 'authenticated',
    'itadmin@test-corp.example.com',
    '$2a$10$qNNmydZGJxcg06XmVIRvaOuXSmv1GKm8u0IHyYuilSBZnNYwaNHca',
    now(),
    '{"provider":"email","providers":["email"]}',
    '{"name":"渡辺 四郎"}',
    now(), now(), '', '', '', '', '', false, false
  );

-- =============================================================
-- 3. auth.identities（Supabase Auth が email ログインに必要）
-- =============================================================
INSERT INTO auth.identities (
  id, user_id, identity_data, provider, provider_id,
  last_sign_in_at, created_at, updated_at
) VALUES
  ('11111111-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000001',
   '{"sub":"11111111-0000-0000-0000-000000000001","email":"admin@test-corp.example.com"}',
   'email', '11111111-0000-0000-0000-000000000001', now(), now(), now()),
  ('11111111-0000-0000-0000-000000000002', '11111111-0000-0000-0000-000000000002',
   '{"sub":"11111111-0000-0000-0000-000000000002","email":"pm@test-corp.example.com"}',
   'email', '11111111-0000-0000-0000-000000000002', now(), now(), now()),
  ('11111111-0000-0000-0000-000000000003', '11111111-0000-0000-0000-000000000003',
   '{"sub":"11111111-0000-0000-0000-000000000003","email":"accounting@test-corp.example.com"}',
   'email', '11111111-0000-0000-0000-000000000003', now(), now(), now()),
  ('11111111-0000-0000-0000-000000000004', '11111111-0000-0000-0000-000000000004',
   '{"sub":"11111111-0000-0000-0000-000000000004","email":"approver@test-corp.example.com"}',
   'email', '11111111-0000-0000-0000-000000000004', now(), now(), now()),
  ('11111111-0000-0000-0000-000000000005', '11111111-0000-0000-0000-000000000005',
   '{"sub":"11111111-0000-0000-0000-000000000005","email":"member@test-corp.example.com"}',
   'email', '11111111-0000-0000-0000-000000000005', now(), now(), now()),
  ('11111111-0000-0000-0000-000000000006', '11111111-0000-0000-0000-000000000006',
   '{"sub":"11111111-0000-0000-0000-000000000006","email":"itadmin@test-corp.example.com"}',
   'email', '11111111-0000-0000-0000-000000000006', now(), now(), now());

-- =============================================================
-- 4. profiles（トリガーで自動作成されるが、display_name を正しい値に更新）
-- =============================================================
UPDATE public.profiles SET display_name = '管理 太郎' WHERE id = '11111111-0000-0000-0000-000000000001';
UPDATE public.profiles SET display_name = '佐藤 花子' WHERE id = '11111111-0000-0000-0000-000000000002';
UPDATE public.profiles SET display_name = '鈴木 一郎' WHERE id = '11111111-0000-0000-0000-000000000003';
UPDATE public.profiles SET display_name = '田中 次郎' WHERE id = '11111111-0000-0000-0000-000000000004';
UPDATE public.profiles SET display_name = '高橋 三郎' WHERE id = '11111111-0000-0000-0000-000000000005';
UPDATE public.profiles SET display_name = '渡辺 四郎' WHERE id = '11111111-0000-0000-0000-000000000006';

-- =============================================================
-- 5. user_roles
-- =============================================================
INSERT INTO public.user_roles (user_id, tenant_id, role) VALUES
  ('11111111-0000-0000-0000-000000000001', '44444444-0000-0000-0000-000000000001', 'tenant_admin'),
  ('11111111-0000-0000-0000-000000000002', '44444444-0000-0000-0000-000000000001', 'pm'),
  ('11111111-0000-0000-0000-000000000003', '44444444-0000-0000-0000-000000000001', 'accounting'),
  ('11111111-0000-0000-0000-000000000004', '44444444-0000-0000-0000-000000000001', 'approver'),
  ('11111111-0000-0000-0000-000000000005', '44444444-0000-0000-0000-000000000001', 'member'),
  ('11111111-0000-0000-0000-000000000006', '44444444-0000-0000-0000-000000000001', 'it_admin');

-- =============================================================
-- 6. プロジェクト（3件: active / planning / completed）
-- =============================================================
INSERT INTO public.projects (id, tenant_id, name, description, status, start_date, end_date, pm_id, created_by) VALUES
  ('22222222-0000-0000-0000-000000000001', '44444444-0000-0000-0000-000000000001',
   'EC サイトリニューアル', 'フロントエンドをNext.jsで再構築するプロジェクト。レスポンシブ対応と決済フロー改善が主なスコープ。',
   'active', '2026-01-15', '2026-06-30',
   '11111111-0000-0000-0000-000000000002', '11111111-0000-0000-0000-000000000002'),
  ('22222222-0000-0000-0000-000000000002', '44444444-0000-0000-0000-000000000001',
   '社内ポータル開発', '社内向け情報共有ポータル。お知らせ、社内Wiki、FAQ機能を含む。',
   'planning', '2026-03-01', '2026-09-30',
   '11111111-0000-0000-0000-000000000002', '11111111-0000-0000-0000-000000000002'),
  ('22222222-0000-0000-0000-000000000003', '44444444-0000-0000-0000-000000000001',
   'モバイルアプリ MVP', 'iOS/Android向けクロスプラットフォームアプリ。React Native で開発。',
   'completed', '2025-10-01', '2026-01-31',
   '11111111-0000-0000-0000-000000000002', '11111111-0000-0000-0000-000000000002');

-- =============================================================
-- 7. プロジェクトメンバー
-- =============================================================
INSERT INTO public.project_members (project_id, user_id, tenant_id) VALUES
  -- EC サイトリニューアル: PM, Member, Approver
  ('22222222-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000002', '44444444-0000-0000-0000-000000000001'),
  ('22222222-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000005', '44444444-0000-0000-0000-000000000001'),
  ('22222222-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000004', '44444444-0000-0000-0000-000000000001'),
  -- 社内ポータル: PM
  ('22222222-0000-0000-0000-000000000002', '11111111-0000-0000-0000-000000000002', '44444444-0000-0000-0000-000000000001'),
  ('22222222-0000-0000-0000-000000000002', '11111111-0000-0000-0000-000000000005', '44444444-0000-0000-0000-000000000001'),
  -- モバイルアプリ MVP: PM, Member
  ('22222222-0000-0000-0000-000000000003', '11111111-0000-0000-0000-000000000002', '44444444-0000-0000-0000-000000000001'),
  ('22222222-0000-0000-0000-000000000003', '11111111-0000-0000-0000-000000000005', '44444444-0000-0000-0000-000000000001');

-- =============================================================
-- 8. タスク（8件: 各ステータス）
-- =============================================================
INSERT INTO public.tasks (id, tenant_id, project_id, title, description, status, assignee_id, due_date, created_by) VALUES
  -- EC サイトリニューアル
  ('33333333-0000-0000-0000-000000000001', '44444444-0000-0000-0000-000000000001',
   '22222222-0000-0000-0000-000000000001', 'トップページデザイン', 'ワイヤーフレーム作成 → デザインカンプ → レビュー',
   'in_progress', '11111111-0000-0000-0000-000000000005', '2026-03-15', '11111111-0000-0000-0000-000000000002'),
  ('33333333-0000-0000-0000-000000000002', '44444444-0000-0000-0000-000000000001',
   '22222222-0000-0000-0000-000000000001', 'API設計', 'REST APIのエンドポイント設計とOpenAPI定義',
   'todo', '11111111-0000-0000-0000-000000000005', '2026-03-20', '11111111-0000-0000-0000-000000000002'),
  ('33333333-0000-0000-0000-000000000003', '44444444-0000-0000-0000-000000000001',
   '22222222-0000-0000-0000-000000000001', 'DB設計レビュー', 'ERD確認とパフォーマンスチューニング方針策定',
   'done', '11111111-0000-0000-0000-000000000004', '2026-02-28', '11111111-0000-0000-0000-000000000002'),
  ('33333333-0000-0000-0000-000000000004', '44444444-0000-0000-0000-000000000001',
   '22222222-0000-0000-0000-000000000001', '決済フロー実装', 'Stripe連携と決済フローの実装',
   'todo', '11111111-0000-0000-0000-000000000005', '2026-04-30', '11111111-0000-0000-0000-000000000002'),
  ('33333333-0000-0000-0000-000000000005', '44444444-0000-0000-0000-000000000001',
   '22222222-0000-0000-0000-000000000001', 'レスポンシブ対応', 'タブレット・スマホ向けレイアウト調整',
   'in_progress', '11111111-0000-0000-0000-000000000005', '2026-04-15', '11111111-0000-0000-0000-000000000002'),
  -- 社内ポータル
  ('33333333-0000-0000-0000-000000000006', '44444444-0000-0000-0000-000000000001',
   '22222222-0000-0000-0000-000000000002', '要件定義', 'ステークホルダーへのヒアリングと要件整理',
   'todo', '11111111-0000-0000-0000-000000000005', '2026-03-15', '11111111-0000-0000-0000-000000000002'),
  -- モバイルアプリ MVP
  ('33333333-0000-0000-0000-000000000007', '44444444-0000-0000-0000-000000000001',
   '22222222-0000-0000-0000-000000000003', 'ストア申請', 'App Store / Google Play への申請準備',
   'done', '11111111-0000-0000-0000-000000000005', '2026-01-20', '11111111-0000-0000-0000-000000000002'),
  ('33333333-0000-0000-0000-000000000008', '44444444-0000-0000-0000-000000000001',
   '22222222-0000-0000-0000-000000000003', 'パフォーマンス最適化', 'アプリ起動時間短縮と画像最適化',
   'done', '11111111-0000-0000-0000-000000000005', '2026-01-25', '11111111-0000-0000-0000-000000000002');

-- =============================================================
-- 9. ワークフロー（7件: 各ステータス・各種別）
-- =============================================================

-- まず workflow_seq を更新（7件分）
UPDATE public.tenants SET workflow_seq = 7 WHERE id = '44444444-0000-0000-0000-000000000001';

INSERT INTO public.workflows (id, tenant_id, workflow_number, type, title, description, status, amount, date_from, date_to, approver_id, rejection_reason, created_by, approved_at) VALUES
  -- 承認済み：交通費精算
  ('55555555-0000-0000-0000-000000000001', '44444444-0000-0000-0000-000000000001',
   'WF-001', 'expense', '2月交通費精算', '2月分の通勤交通費およびクライアント訪問時の交通費',
   'approved', 32400, '2026-02-01', '2026-02-28',
   '11111111-0000-0000-0000-000000000004', NULL,
   '11111111-0000-0000-0000-000000000005', now() - interval '5 days'),
  -- 承認済み：備品購入
  ('55555555-0000-0000-0000-000000000002', '44444444-0000-0000-0000-000000000001',
   'WF-002', 'purchase', 'ノートPC購入申請', '開発用ノートPC（MacBook Pro 14"）の購入申請',
   'approved', 298000, NULL, NULL,
   '11111111-0000-0000-0000-000000000004', NULL,
   '11111111-0000-0000-0000-000000000002', now() - interval '10 days'),
  -- 申請中：休暇
  ('55555555-0000-0000-0000-000000000003', '44444444-0000-0000-0000-000000000001',
   'WF-003', 'leave', '有給休暇申請（3/10-12）', '私用のため3日間の有給取得を希望します',
   'submitted', NULL, '2026-03-10', '2026-03-12',
   '11111111-0000-0000-0000-000000000004', NULL,
   '11111111-0000-0000-0000-000000000005', NULL),
  -- 差戻し：経費
  ('55555555-0000-0000-0000-000000000004', '44444444-0000-0000-0000-000000000001',
   'WF-004', 'expense', 'セミナー参加費', '外部セミナー参加費用の精算',
   'rejected', 55000, '2026-02-15', '2026-02-15',
   '11111111-0000-0000-0000-000000000004', '領収書の添付がありません。再提出をお願いします。',
   '11111111-0000-0000-0000-000000000005', NULL),
  -- 下書き：その他
  ('55555555-0000-0000-0000-000000000005', '44444444-0000-0000-0000-000000000001',
   'WF-005', 'other', 'リモートワーク申請', '在宅勤務の申請（週3日）',
   'draft', NULL, '2026-03-01', '2026-03-31',
   NULL, NULL,
   '11111111-0000-0000-0000-000000000005', NULL),
  -- 取り下げ：購入
  ('55555555-0000-0000-0000-000000000006', '44444444-0000-0000-0000-000000000001',
   'WF-006', 'purchase', 'モニター購入申請', '4Kモニター2台の購入申請',
   'withdrawn', 120000, NULL, NULL,
   '11111111-0000-0000-0000-000000000004', NULL,
   '11111111-0000-0000-0000-000000000002', NULL),
  -- PM による経費申請（承認済み）
  ('55555555-0000-0000-0000-000000000007', '44444444-0000-0000-0000-000000000001',
   'WF-007', 'expense', '1月交通費精算', '1月分のクライアント訪問交通費',
   'approved', 18500, '2026-01-01', '2026-01-31',
   '11111111-0000-0000-0000-000000000004', NULL,
   '11111111-0000-0000-0000-000000000002', now() - interval '20 days');

-- =============================================================
-- 10. 工数（15件: 複数日・複数ユーザー・複数PJ）
-- =============================================================
INSERT INTO public.timesheets (tenant_id, user_id, project_id, task_id, work_date, hours, note) VALUES
  -- Member: EC サイト（2月最終週）
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000005',
   '22222222-0000-0000-0000-000000000001', '33333333-0000-0000-0000-000000000001',
   '2026-02-24', 6.0, 'トップページのヒーロセクション実装'),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000005',
   '22222222-0000-0000-0000-000000000001', '33333333-0000-0000-0000-000000000001',
   '2026-02-25', 7.5, 'レスポンシブブレークポイント調整'),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000005',
   '22222222-0000-0000-0000-000000000001', '33333333-0000-0000-0000-000000000005',
   '2026-02-24', 2.0, 'タブレット向けナビゲーション調整'),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000005',
   '22222222-0000-0000-0000-000000000001', '33333333-0000-0000-0000-000000000002',
   '2026-02-21', 4.0, 'APIエンドポイント洗い出し'),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000005',
   '22222222-0000-0000-0000-000000000001', '33333333-0000-0000-0000-000000000002',
   '2026-02-20', 3.5, 'OpenAPI仕様書ドラフト作成'),
  -- Member: 社内ポータル
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000005',
   '22222222-0000-0000-0000-000000000002', '33333333-0000-0000-0000-000000000006',
   '2026-02-25', 3.0, '要件ヒアリング議事録作成'),
  -- Approver: EC サイト
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000004',
   '22222222-0000-0000-0000-000000000001', '33333333-0000-0000-0000-000000000003',
   '2026-02-18', 2.0, 'DB設計レビュー実施'),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000004',
   '22222222-0000-0000-0000-000000000001', '33333333-0000-0000-0000-000000000003',
   '2026-02-19', 1.5, 'レビュー指摘事項まとめ'),
  -- PM: 各プロジェクト
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000002',
   '22222222-0000-0000-0000-000000000001', NULL,
   '2026-02-24', 2.0, 'ECサイトPJ進捗MTG'),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000002',
   '22222222-0000-0000-0000-000000000001', NULL,
   '2026-02-25', 1.5, 'クライアント定例ミーティング'),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000002',
   '22222222-0000-0000-0000-000000000002', NULL,
   '2026-02-24', 3.0, '社内ポータル要件整理'),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000002',
   '22222222-0000-0000-0000-000000000002', NULL,
   '2026-02-25', 4.0, 'ポータル画面設計ドラフト'),
  -- PM: 前月分（集計用）
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000002',
   '22222222-0000-0000-0000-000000000001', NULL,
   '2026-01-20', 5.0, 'ECサイト要件定義'),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000002',
   '22222222-0000-0000-0000-000000000001', NULL,
   '2026-01-21', 6.0, 'ECサイト技術選定'),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000002',
   '22222222-0000-0000-0000-000000000003', NULL,
   '2026-01-22', 3.0, 'モバイルアプリ最終レビュー');

-- =============================================================
-- 11. 経費（8件: 各カテゴリ・各ステータスのWF紐付け）
-- =============================================================
INSERT INTO public.expenses (id, tenant_id, workflow_id, project_id, category, amount, expense_date, description, receipt_url, created_by) VALUES
  -- WF-001 紐付き（承認済み経費 — Member）
  ('66666666-0000-0000-0000-000000000001', '44444444-0000-0000-0000-000000000001',
   '55555555-0000-0000-0000-000000000001', '22222222-0000-0000-0000-000000000001',
   '交通費', 12800, '2026-02-10', '品川→新宿 往復（クライアント訪問）×8回', NULL,
   '11111111-0000-0000-0000-000000000005'),
  ('66666666-0000-0000-0000-000000000002', '44444444-0000-0000-0000-000000000001',
   '55555555-0000-0000-0000-000000000001', '22222222-0000-0000-0000-000000000001',
   '交通費', 19600, '2026-02-20', '定期外区間 通勤交通費', NULL,
   '11111111-0000-0000-0000-000000000005'),
  -- WF-004 紐付き（差戻し — Member）
  ('66666666-0000-0000-0000-000000000003', '44444444-0000-0000-0000-000000000001',
   '55555555-0000-0000-0000-000000000004', NULL,
   '研修費', 55000, '2026-02-15', 'AWS セキュリティ専門セミナー参加費', NULL,
   '11111111-0000-0000-0000-000000000005'),
  -- WF-007 紐付き（承認済み経費 — PM）
  ('66666666-0000-0000-0000-000000000004', '44444444-0000-0000-0000-000000000001',
   '55555555-0000-0000-0000-000000000007', '22222222-0000-0000-0000-000000000001',
   '交通費', 18500, '2026-01-15', '1月分クライアント訪問交通費まとめ', NULL,
   '11111111-0000-0000-0000-000000000002'),
  -- WF なし（直接登録 — 各カテゴリ）
  ('66666666-0000-0000-0000-000000000005', '44444444-0000-0000-0000-000000000001',
   NULL, '22222222-0000-0000-0000-000000000001',
   '会議費', 4500, '2026-02-22', 'クライアントランチミーティング', NULL,
   '11111111-0000-0000-0000-000000000002'),
  ('66666666-0000-0000-0000-000000000006', '44444444-0000-0000-0000-000000000001',
   NULL, '22222222-0000-0000-0000-000000000001',
   '消耗品費', 8900, '2026-02-18', '開発チーム用キーボード2台', NULL,
   '11111111-0000-0000-0000-000000000002'),
  ('66666666-0000-0000-0000-000000000007', '44444444-0000-0000-0000-000000000001',
   NULL, '22222222-0000-0000-0000-000000000003',
   '通信費', 3300, '2026-01-10', 'プロジェクト用SIM契約（1月分）', NULL,
   '11111111-0000-0000-0000-000000000005'),
  ('66666666-0000-0000-0000-000000000008', '44444444-0000-0000-0000-000000000001',
   NULL, NULL,
   '図書費', 6600, '2026-02-05', 'TypeScript本2冊', NULL,
   '11111111-0000-0000-0000-000000000005');

-- =============================================================
-- 12. 請求書（3件: draft / sent / paid）
-- =============================================================

-- invoice_seq を更新（3件分）
UPDATE public.tenants SET invoice_seq = 3 WHERE id = '44444444-0000-0000-0000-000000000001';

INSERT INTO public.invoices (id, tenant_id, invoice_number, project_id, client_name, issued_date, due_date, subtotal, tax_rate, tax_amount, total_amount, status, notes, created_by) VALUES
  -- 入金済み（モバイルアプリ MVP）
  ('77777777-0000-0000-0000-000000000001', '44444444-0000-0000-0000-000000000001',
   'INV-2026-0001', '22222222-0000-0000-0000-000000000003',
   '株式会社クライアントA', '2026-01-31', '2026-02-28',
   3000000, 10.00, 300000, 3300000, 'paid',
   'モバイルアプリ MVP 開発費（一括）',
   '11111111-0000-0000-0000-000000000003'),
  -- 送付済み（EC サイト — 1月分）
  ('77777777-0000-0000-0000-000000000002', '44444444-0000-0000-0000-000000000001',
   'INV-2026-0002', '22222222-0000-0000-0000-000000000001',
   '株式会社クライアントB', '2026-02-10', '2026-03-10',
   1500000, 10.00, 150000, 1650000, 'sent',
   'EC サイトリニューアル 2026年1月分',
   '11111111-0000-0000-0000-000000000003'),
  -- 下書き（EC サイト — 2月分）
  ('77777777-0000-0000-0000-000000000003', '44444444-0000-0000-0000-000000000001',
   'INV-2026-0003', '22222222-0000-0000-0000-000000000001',
   '株式会社クライアントB', '2026-03-01', '2026-03-31',
   1800000, 10.00, 180000, 1980000, 'draft',
   'EC サイトリニューアル 2026年2月分（確認中）',
   '11111111-0000-0000-0000-000000000003');

-- =============================================================
-- 13. 請求明細
-- =============================================================
INSERT INTO public.invoice_items (tenant_id, invoice_id, description, quantity, unit_price, amount, sort_order) VALUES
  -- INV-2026-0001 明細
  ('44444444-0000-0000-0000-000000000001', '77777777-0000-0000-0000-000000000001',
   'モバイルアプリ設計・開発', 1, 2500000, 2500000, 1),
  ('44444444-0000-0000-0000-000000000001', '77777777-0000-0000-0000-000000000001',
   'テスト・品質保証', 1, 300000, 300000, 2),
  ('44444444-0000-0000-0000-000000000001', '77777777-0000-0000-0000-000000000001',
   'ストア申請サポート', 1, 200000, 200000, 3),
  -- INV-2026-0002 明細
  ('44444444-0000-0000-0000-000000000001', '77777777-0000-0000-0000-000000000002',
   'フロントエンド開発（160h × @8,000）', 160, 8000, 1280000, 1),
  ('44444444-0000-0000-0000-000000000001', '77777777-0000-0000-0000-000000000002',
   'デザイン制作', 1, 220000, 220000, 2),
  -- INV-2026-0003 明細
  ('44444444-0000-0000-0000-000000000001', '77777777-0000-0000-0000-000000000003',
   'フロントエンド開発（200h × @8,000）', 200, 8000, 1600000, 1),
  ('44444444-0000-0000-0000-000000000001', '77777777-0000-0000-0000-000000000003',
   'API開発・テスト', 1, 150000, 150000, 2),
  ('44444444-0000-0000-0000-000000000001', '77777777-0000-0000-0000-000000000003',
   'プロジェクト管理費', 1, 50000, 50000, 3);

-- =============================================================
-- 14. 通知（6件: 各ユーザー向け）
-- =============================================================
INSERT INTO public.notifications (tenant_id, user_id, type, title, body, resource_type, resource_id, is_read) VALUES
  -- Member 向け
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000005',
   'workflow_approved', 'ワークフロー承認', 'WF-001「2月交通費精算」が承認されました',
   'workflow', '55555555-0000-0000-0000-000000000001', true),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000005',
   'workflow_rejected', 'ワークフロー差戻し', 'WF-004「セミナー参加費」が差し戻されました。理由: 領収書の添付がありません。',
   'workflow', '55555555-0000-0000-0000-000000000004', false),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000005',
   'task_assigned', 'タスク割当', '「決済フロー実装」があなたに割り当てられました',
   'task', '33333333-0000-0000-0000-000000000004', false),
  -- Approver 向け
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000004',
   'workflow_submitted', '承認依頼', 'WF-003「有給休暇申請（3/10-12）」の承認をお願いします',
   'workflow', '55555555-0000-0000-0000-000000000003', false),
  -- Accounting 向け
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000003',
   'invoice_created', '請求書作成', 'INV-2026-0003 が下書きとして作成されました',
   'invoice', '77777777-0000-0000-0000-000000000003', false),
  -- PM 向け
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000002',
   'workflow_approved', 'ワークフロー承認', 'WF-002「ノートPC購入申請」が承認されました',
   'workflow', '55555555-0000-0000-0000-000000000002', true);

-- =============================================================
-- 15. 監査ログ（代表的操作のサンプル）
-- =============================================================
INSERT INTO public.audit_logs (tenant_id, user_id, action, resource_type, resource_id, after_data, metadata) VALUES
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000005',
   'create', 'workflow', '55555555-0000-0000-0000-000000000001',
   '{"workflow_number":"WF-001","title":"2月交通費精算","status":"draft"}',
   '{"ip":"127.0.0.1"}'),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000005',
   'submit', 'workflow', '55555555-0000-0000-0000-000000000001',
   '{"status":"submitted"}',
   '{"ip":"127.0.0.1"}'),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000004',
   'approve', 'workflow', '55555555-0000-0000-0000-000000000001',
   '{"status":"approved"}',
   '{"ip":"127.0.0.1"}'),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000002',
   'create', 'project', '22222222-0000-0000-0000-000000000001',
   '{"name":"EC サイトリニューアル","status":"planning"}',
   '{"ip":"127.0.0.1"}'),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000002',
   'update', 'project', '22222222-0000-0000-0000-000000000001',
   '{"status":"active"}',
   '{"ip":"127.0.0.1"}'),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000003',
   'create', 'invoice', '77777777-0000-0000-0000-000000000001',
   '{"invoice_number":"INV-2026-0001","status":"draft","total_amount":3300000}',
   '{"ip":"127.0.0.1"}'),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000003',
   'update', 'invoice', '77777777-0000-0000-0000-000000000001',
   '{"status":"paid"}',
   '{"ip":"127.0.0.1"}'),
  ('44444444-0000-0000-0000-000000000001', '11111111-0000-0000-0000-000000000001',
   'create', 'user_role', NULL,
   '{"user_email":"member@test-corp.example.com","role":"member"}',
   '{"ip":"127.0.0.1"}');
